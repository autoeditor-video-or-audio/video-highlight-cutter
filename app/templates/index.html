<!DOCTYPE html>
<html>
<head>
  <title>Video Highlights</title>
  <script type="module">
    import { setup } from 'https://cdn.skypack.dev/twind/shim';
    setup({
      theme: {
        extend: {
          fontFamily: { orbitron: ["Orbitron", "sans-serif"] },
          colors: {
            navy: "#0A0A1A",
            offwhite: "#E0E7FF",
            blueglow: "#038EFC",
            vibrantgreen: "#05C46B",
            darkcontainer: "#1A1D2B",
            darkborder: "#25283F"
          }
        }
      }
    });
  </script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400..900&display=swap" rel="stylesheet">
</head>
<body class="min-h-screen bg-navy text-offwhite font-orbitron">

  <!-- SEÇÃO 1: Form -->
  <div class="max-w-4xl mx-auto px-4 pt-8">
    <h1 class="text-5xl font-bold mb-8 text-center uppercase tracking-widest">
      <span class="text-blueglow">Video</span> Highlights
    </h1>

    <form id="uploadForm" class="flex flex-col gap-4 mb-8">
      <!-- Drag & Drop -->
      <div id="dropZone"
           class="relative cursor-pointer border-2 border-blueglow rounded-lg px-6 py-6 text-center transition-all duration-300 hover:bg-blueglow hover:text-navy">
        <input type="file" id="fileInput" accept=".mp4" class="hidden">
        <p id="file-name">Arraste seu vídeo aqui ou clique para selecionar (.mp4)</p>
        <video id="videoPreview" class="mt-4 w-full max-h-64 rounded-lg hidden" controls></video>
      </div>

      <!-- Prompt + Ver conteúdo -->
      <div class="flex flex-col sm:flex-row gap-4">
        <select id="dhPromptSelect"
                class="flex-1 bg-darkcontainer border-2 border-darkborder rounded-lg px-4 py-3 focus:outline-none focus:border-blueglow">
          <option value="" disabled selected>Carregando prompts...</option>
        </select>
        <button id="viewPromptBtn" type="button"
                class="bg-transparent border-2 border-blueglow text-blueglow rounded-lg px-4 py-2 hover:bg-blueglow hover:text-navy">
          Ver conteúdo
        </button>
      </div>

      <!-- Custom prompt -->
      <label class="flex items-center gap-2">
        <input type="checkbox" id="useDhCustom" class="w-5 h-5 accent-blueglow">
        <span class="text-sm opacity-80">Usar prompt customizado</span>
      </label>
      <textarea id="dhCustomText" rows="10" style="display:none"
                class="w-full bg-darkcontainer border-2 border-darkborder rounded-lg px-4 py-3 focus:outline-none focus:border-blueglow"
                placeholder="Cole aqui um prompt customizado..."></textarea>

      <!-- Botão Enviar -->
      <button id="sendBtn" type="submit" disabled
              class="bg-blueglow opacity-50 cursor-not-allowed font-bold flex items-center justify-center gap-2 rounded-lg px-6 py-3 text-white">
        Enviar
      </button>
    </form>

    <!-- Barra de progresso + status -->
    <div id="progressBar" class="w-full rounded-lg bg-darkborder h-8 mb-4 overflow-hidden hidden">
      <div id="progressBarFill"
        class="bg-vibrantgreen animate-pulse h-full rounded-lg text-center text-white font-bold flex items-center justify-center transition-all"
        style="width: 0%;">0%</div>
    </div>
    <div id="uploadStatus" class="mb-10 text-center text-lg text-gray-400"></div>
  </div>

  <hr class="max-w-4xl mx-auto border-t-2 border-blueglow opacity-50">

  <!-- SEÇÃO 2: Highlights -->
  <section class="w-full">
    <div class="mx-auto px-4 py-8" style="max-width: 1600px;">
      <h2 class="text-3xl font-bold mb-6 text-center uppercase tracking-wide">
        Highlights <span class="text-vibrantgreen">Disponíveis</span>
      </h2>

      <!-- 1/2/3/4 colunas, sempre ocupando a largura disponível -->
      <div id="highlightsGrid"
           class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8 justify-items-center">
        {% for f in highlights %}
        <div class="relative border-2 border-darkborder bg-darkcontainer rounded-xl p-4 flex flex-col items-center w-full">
          <a class="text-blue-400 font-semibold underline hover:text-blueglow block text-center break-all text-sm mb-2"
            href="/download/{{ f.name }}" download>{{ f.name }}</a>
          <video class="w-full rounded" style="aspect-ratio: 16 / 9; height:auto;" controls>
            <source src="/download/{{ f.name }}" type="video/mp4">
          </video>
        </div>
        {% endfor %}
      </div>
    </div>
  </section>

  <script src="/static/main.js"></script>
</body>
</html>
